<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador Financeiro NeoGuard Limpo</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="card">
        <h1>Simulador Financeiro e de Risco Neonatal</h1>
        <p>Insira os dados para calcular custos e benefícios.</p>

        <hr>

        <h2 class="title">Entrada de Dados</h2>
        <!--DÚVIDA-> Posso utilizar o atributo "required"? -->
        Peso do Bebê (em gramas):<input type="number" id="peso" placeholder="Ex: 1500"><br><br>
        Idade Gestacional (em semanas):<input type="number" id="idadeGestacional" placeholder="Ex: 32"><br><br>
        Custo Diário da UTI Neonatal (R$):<input type="number" id="diaria" placeholder="Ex: 6000"><br><br>
        Temperatura Média Registrada (ºC) - (Opcional):<input type="number" id="temperatura" placeholder="Ex: 36.0"><br><br>

        <button onclick="simular()">Gerar Relatório de Simulação</button>
        <div class="resultado" id="resultado">
            Relatório aparecerá aqui.
        </div>
    </div>

    <script>
        function simular() {
            // utilizei o parseFloat para que no momento em que haja a captura de dado, ele mude
            // automaticamente para float(decimal)
            var peso = parseFloat(document.getElementById('peso').value);
            var idadeGestacional = parseFloat(document.getElementById('idadeGestacional').value);
            var diaria = parseFloat(document.getElementById('diaria').value);
            var temperatura = parseFloat(document.getElementById('temperatura').value) || 36.5;

            if (!peso || !idadeGestacional || !diaria) {
                alert("Por favor, preencha o peso, a idade gestacional e o custo da diária para simular.");
                return;
            }

            let tempoInternacaoBase;
            let riscoComplicacaoBase;

            if (peso < 1000) {
                tempoInternacaoBase = 80;
                riscoComplicacaoBase = 45;
            } else if (peso < 1500) {
                tempoInternacaoBase = 45;
                riscoComplicacaoBase = 35;
            } else if (peso < 2500 || idadeGestacional < 37) {
                tempoInternacaoBase = 25;
                riscoComplicacaoBase = 20;
            } else {
                tempoInternacaoBase = 5;
                riscoComplicacaoBase = 10;
            }

            let ajusteRiscoTemp = 0;
            let ajusteTempoTemp = 0;

            if (temperatura < 36.0) {
                ajusteRiscoTemp = 15;
                ajusteTempoTemp = 10;
            } else if (temperatura < 36.5) {
                ajusteRiscoTemp = 5;
                ajusteTempoTemp = 5;
            }

            var tempoInternacaoTotal = tempoInternacaoBase + ajusteTempoTemp;
            var custoTotalEstimado = tempoInternacaoTotal * diaria;
            var riscoEstimadoSemNeoGuard = riscoComplicacaoBase + ajusteRiscoTemp;

            var diasEconomizados = ajusteTempoTemp;
            var economiaPotencial = diasEconomizados * diaria;
            var riscoReduzidoNeoGuard = Math.max(10, riscoEstimadoSemNeoGuard * 0.4);

            var formatarMoeda = (valor) => valor.toLocaleString('pt-BR', { minimumFractionDigits: 2 });

            let conteudoHTML = `
            <h2>Relatório de Simulação Financeira e Clínica</h2>
            <p><strong>Dados Inseridos:</strong> Peso ${peso}g | IG ${idadeGestacional}s | Diária R$ ${formatarMoeda(diaria)}</p>
            
            <hr>

            <h3>1. Cenário Sem Monitoramento Otimizado</h3>
                <ul>
                    <li> <strong>Tempo Médio de Internação:</strong> <strong>${tempoInternacaoTotal} dias</strong>(${tempoInternacaoBase} base + ${ajusteTempoTemp} dias por risco de instabilidade térmica).</li>
                </ul>

                <ul>
                    <li> <strong>Custo Total Estimado da UTI:</strong> <strong>R$ ${formatarMoeda(custoTotalEstimado)}</strong>(${tempoInternacaoTotal} dias &times; R$ ${formatarMoeda(diaria)})</li>
                </ul>

                <ul>
                   <li> <strong>Risco de Complicações Graves:</strong> <strong>${riscoEstimadoSemNeoGuard.toFixed(0)}%</strong> (Risco aumentado conforme a tabela <strong> Scopes-ahmed.)</strong></li>
                </ul>

            <h4>1.1 Principais Riscos (Instabilidade Térmica)</h4>
            <ul>
                <li><strong>Mortalidade:</strong> Risco significativamente maior.</li>
                <li><strong>Dano Neurológico:</strong> Complicações de longo prazo.</li>
                <li><strong>Maior Tempo em UTI:</strong> Necessidade de mais dias para estabilização metabólica.</li>
            </ul>

            <hr>

            <h3>2. Uso do NeoGuard:</h3>
            <h4>Risco Estimado de Complicações:</h4>

                <ul>
                    <li> <strong>Risco Sem NeoGuard:</strong> ${riscoEstimadoSemNeoGuard.toFixed(0)}%<br></li> 
                    <li> <strong>Risco com NeoGuard:</strong> ${riscoReduzidoNeoGuard.toFixed(0)}% (Redução significativa do risco.)</li>
                </ul>
                
                    <strong>Economia em Dias de Internação:</strong>
                    ${diasEconomizados} dias a menos<br>
                
                    <strong>Custo evitado ao reduzir internação:</strong>
                    R$ ${formatarMoeda(economiaPotencial)}<br>
            
            <hr>    

            <p class="fraseEfeito">
                "Com NeoGuard, você não apenas economiza custos, mas aumenta a chance de estabilidade e segurança do seu bebê."
            </p>
        `;

            document.getElementById('resultado').innerHTML = conteudoHTML;
        }
    </script>

</body>

</html>